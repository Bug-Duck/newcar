<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script src="./dist/newcar.js"></script>
  </head>
  <body>
    <canvas id="my-canvas" width="500" height="500" style="border: 5px solid aqua"></canvas>
    <img src="./materials/oc-animations/canvas0.png" id="0"/>
    <img src="./materials/oc-animations/canvas1.png" id="1"/>
    <img src="./materials/oc-animations/canvas2.png" id="2"/>
    <img src="./materials/oc-animations/canvas3.png" id="3"/>
    <img src="./materials/oc-animations/canvas4.png" id="4"/>
    <img src="./materials/oc-animations/canvas5.png" id="5"/>
    <img src="./materials/oc-animations/canvas6.png" id="6"/>
    <img src="./materials/oc-animations/canvas7.png" id="7"/>
    <img src="./materials/oc-animations/canvas8.png" id="8"/>
    <img src="./materials/oc-animations/canvas9.png" id="9"/>
    <img src="./materials/oc-animations/canvas10.png" id="10"/>
    <img src="./materials/oc-animations/canvas11.png" id="11"/>
    <img src="./materials/oc-animations/canvas12.png" id="12"/>
    <img src="./materials/oc-animations/canvas13.png" id="13"/>
    <img src="./materials/oc-animations/canvas14.png" id="14"/>
    <img src="./materials/oc-animations/canvas15.png" id="15"/>
    <script>
      const animation = new newcar.Car(document.getElementById("my-canvas"), 60);
      const tit = new newcar.Text("Hello World!", 10, 10);
      const point1 = new newcar.Point(0,0);
      const point2 = new newcar.Point(0,0);
      const line = new newcar.LineSegment(point1, point2);
      const acboxOC = new newcar.Spirit(100, 100);
      acboxOC.setStatus(document.getElementById("0"));
      acboxOC.setStatus(document.getElementById("1"));
      acboxOC.setStatus(document.getElementById("2"));
      acboxOC.setStatus(document.getElementById("3"));
      acboxOC.setStatus(document.getElementById("4"));
      acboxOC.setStatus(document.getElementById("5"));
      acboxOC.setStatus(document.getElementById("6"));
      acboxOC.setStatus(document.getElementById("7"));
      acboxOC.setStatus(document.getElementById("8"));
      acboxOC.setStatus(document.getElementById("9"));
      acboxOC.setStatus(document.getElementById("10"));
      acboxOC.setStatus(document.getElementById("11"));
      acboxOC.setStatus(document.getElementById("12"));
      acboxOC.setStatus(document.getElementById("13"));
      acboxOC.setStatus(document.getElementById("14"));
      acboxOC.setStatus(document.getElementById("15"));
      console.log(line);
      animation.linkObject(line);
      animation.linkObject(point1);
      animation.linkObject(point2);
      animation.linkObject(acboxOC);
      tit.color = "skyblue";
      tit.size = "100px";
      const width = 500, height = 500;
      //let addEveryX = 10, addEveryY = 10;
      //animation.forEvery((curFrame) => {
      //  if (curFrame == 200) tit.text = "Fuck world!";
      //  if (tit.x >= width || tit.x <= 0) addEveryX = -addEveryX;
      //  if (tit.y >= height || tit.y <= 0) addEveryY = -addEveryY;
      //  tit.x += addEveryX;
      //  tit.y += addEveryY;
      //})
      //animation.linkObject(tit);
      //animation.start();
      // animation.onUpdate(() => {
      //   if (acboxOC.status === 15) acboxOC.status = 0;
      //   else acboxOC.status += 1;
      // });

        animation.onUpdate((curFrame) => {
          console.log(`Now the frame is ${curFrame}`)
        })

      tit.lived();
      line.lived();
      acboxOC.lived();
      new newcar.AnimationBuilder()
        .addObject(tit)
        .addItem(
          newcar.Translation.create().to(100, 100).startAt(0).lastsFor(200).bindTo(tit).by(newcar.EaseInOutQuintInterpolator).boom()
        )
        .addItem(
          newcar.MutateContent.create().bindTo(tit).startAt(200).mutateContentTo("Fuck World!").boom()
        )
        .addItem(
          newcar.Rotation.create().to(2 * Math.PI).startAt(200).lastsFor(100).bindTo(tit).boom()
        )
        .addItem(
          newcar.Scale.create().to(2, 2).startAt(300).lastsFor(100).by(newcar.EaseInOutQuadInterpolator).bindTo(tit).boom()
        )

        .addObject(point2)
        .addItem(
          newcar.Translation.create().to(200,100).startAt(0).lastsFor(200).bindTo(point2).by(newcar.EaseInOutQuintInterpolator).boom()
        )

        .addObject(acboxOC)
        .addItem(
          newcar.ChangingStatus.create().to(15).startAt(0).lastsFor(15).bindTo(acboxOC).boom()
        )

        .playOnCar(animation)

        animation.start();
    </script>
  </body>
</html>
